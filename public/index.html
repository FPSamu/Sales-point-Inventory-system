<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <title>Ayalas Inventory System</title>
</head>
<body>
    <div id="wrapper">
        <nav id="tabs">
            <ul>
                <li><a href="">Ventas</a></li>
                <span>|</span>
                <li><a href="">Inventario</a></li>
                <span>|</span>
            </ul>
        </nav>

        <h1>Inventario</h1>

        <div class="content">
            <div class="table">
                <table id="data-table" border="1">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre del producto</th>
                            <th>Cantidad</th>
                            <th>Precio</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <script>
                async function fetchData() {
                  try {
                    const response = await fetch('/api/script'); // Use this in production
                    if (!response.ok) {
                      console.error(`HTTP error! Status: ${response.status}`);
                      return;
                    }
                    const data = await response.json();
                    console.log(data);
          
                    const tableBody = document.querySelector('#data-table tbody');
                    data.forEach(row => {
                      const tableRow = document.createElement('tr');
                      const idCell = document.createElement('td');
                      idCell.textContent = row.id;
                      tableRow.appendChild(idCell);
          
                      const nameCell = document.createElement('td');
                      nameCell.textContent = row.nombre_producto;
                      tableRow.appendChild(nameCell);
          
                      const inventoryCell = document.createElement('td');
                      inventoryCell.textContent = row.cantidad;
                      tableRow.appendChild(inventoryCell);
          
                      const priceCell = document.createElement('td');
                      priceCell.textContent = row.precio;
                      tableRow.appendChild(priceCell);
          
                      tableBody.appendChild(tableRow);
                    });
                  } catch (error) {
                    console.error('Error fetching data:', error);
                  }
                }
          
                fetchData();
              </script>
            <!-- <script type="module" src="api/script.js"></script> -->

            <div class="buttons">
                <a href="#">
                    <div class="button">
                        <img src="images/add.png" alt="Add_image_button">
                        <p>AÃ±adir producto</p>
                    </div>
                </a>
                <a href="#">
                    <div class="button">
                        <img src="images/remove.png" alt="Remove_image_button">
                        <p>Eliminar producto</p>
                    </div>
                </a>
                <a href="#">
                    <div class="button">
                        <img src="images/edit.png" alt="Edit_image_button">
                        <p>Editar producto</p>
                    </div>
                </a>
            </div>
        </div>
    </div>
</body>
</html>